(()=>{"use strict";const e={disabled:!1,target:window,x:0,y:0,startX:0,startY:0,pressSpace:!1,pressMouse:!1},t=t=>{const s=e.startX+e.x-t.screenX,r=e.startY+e.y-t.screenY;e.target?.scroll({top:r,left:s})},s={passive:!0},r=document.createElement("style"),n=()=>{e.pressSpace=!1,e.pressMouse=!1,r.textContent="",window.removeEventListener("mousemove",t,s)};chrome.storage.local.get(["disabled"],(({disabled:t})=>{e.disabled=Boolean(t)})),chrome.runtime.onMessage.addListener((({data:t})=>{e.disabled=t.disabled})),window.addEventListener("load",(()=>{document.head.append(r)})),window.addEventListener("keydown",(t=>{if(!e.disabled&&(t.target!==document.activeElement||"true"!==document.activeElement.contentEditable&&!["input","textarea","button"].some((e=>e===document.activeElement?.tagName.toLowerCase())))&&" "===t.key){if(t.preventDefault(),e.pressSpace)return;e.pressSpace=!0,r.textContent="* {cursor: move !important;}"}})),window.addEventListener("keyup",(t=>{" "===t.key&&e.pressSpace&&(e.pressSpace=!1,e.pressMouse||n())})),window.addEventListener("mousedown",(r=>{if(!e.disabled&&e.pressSpace){let n=r.target;for(r.preventDefault(),e.target=null,e.pressMouse=!0;n;){if(n.firstChild&&(n.clientWidth!==n.scrollWidth&&3<Math.abs(n.clientWidth-n.scrollWidth)||n.clientHeight!==n.scrollHeight&&3<Math.abs(n.clientHeight-n.scrollHeight))&&"visible"!==getComputedStyle(n).overflow){e.target=n||window;break}n=n.parentElement}e.target||=window,e.x=r.screenX,e.y=r.screenY,e.target===window?(e.startX=window.pageXOffset,e.startY=window.pageYOffset):(e.startX=e.target.scrollLeft,e.startY=e.target.scrollTop),window.addEventListener("mousemove",t,s)}})),window.addEventListener("mouseup",(()=>{e.pressMouse=!1,e.pressSpace||n(),window.removeEventListener("mousemove",t,s)})),window.addEventListener("click",(t=>{e.pressSpace&&t.preventDefault()})),window.addEventListener("blur",(()=>n()))})();