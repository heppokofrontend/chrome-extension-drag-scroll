(()=>{"use strict";const e={disabled:!1,target:window,x:0,y:0,startX:0,startY:0,pressSpace:!1,pressMouse:!1,scrollableX:!1,scrollableY:!1},t=t=>{const s=e.startX+(e.scrollableX?e.x-t.screenX:0),r=e.startY+(e.scrollableY?e.y-t.screenY:0);e.target?.scroll({top:r,left:s})},s={passive:!0},r=(()=>{const e=document.createElement("style");return e.dataset.from="chrome-extenstion",e.textContent="* {cursor: move !important;}",e})(),o=(()=>{const e=document.createElement("drag-screen");return e.style.cssText="\n    position: fixed;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    z-index: 2147483647;\n  ",e.dataset.from="chrome-extenstion",e})(),n=()=>{e.pressSpace=!1,e.pressMouse=!1,r.remove(),window.removeEventListener("mousemove",t,s)};chrome.storage.local.get(["disabled"],(({disabled:t})=>{e.disabled=Boolean(t)})),chrome.runtime.onMessage.addListener((({data:t})=>{e.disabled=t.disabled})),window.addEventListener("keydown",(t=>{if(!e.disabled&&(t.target!==document.activeElement||"true"!==document.activeElement.contentEditable&&!["input","textarea","button"].some((e=>e===document.activeElement?.tagName.toLowerCase())))&&" "===t.key){if(t.preventDefault(),e.pressSpace)return;e.pressSpace=!0,document.head.append(r)}})),window.addEventListener("keyup",(t=>{" "===t.key&&e.pressSpace&&(e.pressSpace=!1,e.pressMouse||n())})),window.addEventListener("mousedown",(r=>{if(!e.disabled&&e.pressSpace){const n=/visible|hidden/,a=3;let l=r.target;for(r.preventDefault(),e.target=null,e.scrollableX=!1,e.scrollableY=!1,e.pressMouse=!0;l;){const{overflowX:t,overflowY:s}=getComputedStyle(l);if(l.firstChild&&(e.scrollableX=l.clientWidth!==l.scrollWidth&&a<Math.abs(l.clientWidth-l.scrollWidth)&&!n.test(t),e.scrollableY=l.clientHeight!==l.scrollHeight&&a<Math.abs(l.clientHeight-l.scrollHeight)&&!n.test(s),e.scrollableX||e.scrollableY)){e.target=l;break}l=l.parentElement}e.target||(e.target=window,e.scrollableX=!0,e.scrollableY=!0),e.x=r.screenX,e.y=r.screenY,e.target===window?(e.startX=window.pageXOffset,e.startY=window.pageYOffset):(e.startX=e.target.scrollLeft,e.startY=e.target.scrollTop),document.body.append(o),window.addEventListener("mousemove",t,s)}})),window.addEventListener("mouseup",(()=>{e.pressMouse=!1,e.pressSpace||n(),o.remove(),window.removeEventListener("mousemove",t,s)})),window.addEventListener("blur",(()=>n()))})();